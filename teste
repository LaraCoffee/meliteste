#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
typedef struct{ 
    int mat;
    char nome[20];
    float med;
} TAluno;

FILE *paluno;
TAluno aluno_aux, aluno_nulo;
void linha(){
int i;
for (i=1; i<=80; i++)
    printf("_");
}

void cabec() {
system("cls");
printf("UNIAESO");
linha();
}
void abre_arquivo(){
paluno = fopen("aluno.txt", "r+b");
if (paluno == NULL)
paluno = fopen("aluno.txt", "w+b");
}


void inserir(){
int resp;
do {
    cabec();
    printf("\n\nCadastrar novo aluno\n\n");
    printf(" \nMatricula: ");
    scanf("%d", &aluno_aux.mat);
    printf("\nNome.....: ");
    fflush(stdin);
    gets(aluno_aux.nome);
    printf("\nMedia....: ");
    scanf("%f", &aluno_aux.med);
    fseek(paluno, 0, SEEK_END);
    fwrite(&aluno_aux,
    sizeof(TAluno), 1, paluno);
    printf("\n\nAluno cadastrado com sucesso!\n\n");
    printf("\nDeseja cadastrar outro: (1-sim/0-nao)? ");
    scanf("%d", &resp);
} while (resp ==1);
}

int procura(int matp)
{ int p;
p = 0;
rewind(paluno);
fread(&aluno_aux,
sizeof(TAluno), 1,
paluno);
while (feof(paluno)==0)
{ if (aluno_aux.mat ==
matp)
return p;
else
{ fread(&aluno_aux,
sizeof(TAluno), 1,
paluno);
p++;
}
}
return -1;
}
void mostre(int pos)
{ fseek(paluno, pos*sizeof(TAluno),
SEEK_SET);
fread(&aluno_aux, sizeof(TAluno), 1,
paluno);
printf(“\n\n”);
linha();
printf(“Matricula Nome Media\n”);
linha();
printf(“%9d %-20s %5.1f\n”,
aluno_aux.mat,
aluno_aux.nome, aluno_aux.med);
linha();
}
